<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>咖啡日常問卷調查 (超簡潔版)</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f4f4f4;
            color: #333;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: flex-start; /* Align to top if content is long */
            min-height: 100vh;
        }

        .container {
            background-color: #fff;
            padding: 25px 30px;
            border-radius: 8px;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 600px;
        }

        h1 {
            color: #333;
            text-align: center;
            margin-bottom: 10px;
            font-size: 1.8em;
        }

        .description {
            text-align: left;
            margin-bottom: 25px;
            font-size: 0.95em;
            color: #555;
        }

        .question-group {
            margin-bottom: 20px;
            padding: 15px;
            border: 1px solid #eee;
            border-radius: 5px;
            background-color: #fdfdfd;
        }

        .question-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #444;
        }

        .question-group div {
            margin-bottom: 5px;
        }

        .question-group input[type="radio"],
        .question-group input[type="checkbox"] {
            margin-right: 8px;
            vertical-align: middle;
        }
        .question-group input[type="radio"] + label,
        .question-group input[type="checkbox"] + label {
            font-weight: normal; /* Make option labels normal weight */
            display: inline; /* Keep label on same line as radio */
        }


        select {
            width: 100%;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
            box-sizing: border-box; /* Important for padding and width */
            font-size: 0.95em;
        }

        button[type="submit"] {
            display: block;
            width: 100%;
            padding: 12px;
            background-color: #5cb85c;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 1.1em;
            transition: background-color 0.3s ease;
        }

        button[type="submit"]:hover {
            background-color: #4cae4c;
        }

        .required {
            color: red;
            font-weight: bold;
        }

        #confirmationMessage {
            text-align: center;
            padding: 20px;
            background-color: #e6ffed;
            border: 1px solid #b7e4c7;
            color: #2d6a4f;
            border-radius: 5px;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>咖啡日常問卷調查 (超簡潔版 - 5題)</h1>
        <p class="description">您好！<br><br>感謝您撥冗參與這份超簡潔的咖啡飲用習慣問卷。預計填答時間約 1-2 分鐘。<br><br>再次感謝您的參與！</p>

        <form action="https://docs.google.com/forms/u/0/d/e/1FAIpQLSeG7oXUp9EfNNDv9P_ZgfI49Icc1uNoIS2qFWFtcqqzDNrFbA/formResponse" target="_self" method="POST" id="mG61Hd"
            <!-- 第一部分：您的咖啡習慣 -->
            <div class="question-group" id="q1_group">
                <label for="q1_habit">1. 您平常有喝咖啡的習慣嗎？ <span class="required">*</span></label>
                <div>
                    <input type="radio" id="q1_yes" name="entry.1531678580" value="是" required>
                    <label for="q1_yes">是</label>
                </div>
                <div>
                    <input type="radio" id="q1_no" name="entry.1531678580" value="否">
                    <label for="q1_no">否</label>
                </div>
            </div>

            <div id="furtherQuestions" style="display: none;">
                <div class="question-group" id="q2_group">
                    <label for="q2_frequency">2. 您通常多久喝一次咖啡？ <span class="required">*</span></label>
                    <select id="q2_frequency" name="entry.971450043" required>
                        <option value="">請選擇...</option>
                        <option value="每天">每天</option>
                        <option value="每週數次 (約2-5次)">每週數次 (約2-5次)</option>
                        <option value="每月數次 (約1-4次)">每月數次 (約1-4次)</option>
                        <option value="偶爾才喝 (每月少於1次)">偶爾才喝 (每月少於1次)</option>
                    </select>
                </div>

                <div class="question-group" id="q3_group">
                    <label>3. 您最常喝哪種類型的咖啡？(單選最主要的一項) <span class="required">*</span></label>
                    <div><input type="radio" id="q3_black" name="entry.1777068572" value="黑咖啡" required><label for="q3_black">黑咖啡 (美式、手沖等，不加奶糖)</label></div>
                    <div><input type="radio" id="q3_milk" name="entry.1777068572" value="含奶咖啡"><label for="q3_milk">含奶咖啡 (拿鐵、卡布奇諾等)</label></div>
                    <div><input type="radio" id="q3_instant" name="entry.1777068572" value="即溶咖啡"><label for="q3_instant">即溶咖啡</label></div>
                    <div><input type="radio" id="q3_canned" name="entry.1777068572" value="罐裝/瓶裝咖啡"><label for="q3_canned">罐裝/瓶裝咖啡</label></div>
                    <div><input type="radio" id="q3_other" name="entry.1777068572" value="其他"><label for="q3_other">其他</label></div>
                </div>

                <div class="question-group" id="q4_group">
                    <label>4. 您喝咖啡的最主要原因是什麼？(單選) <span class="required">*</span></label>
                    <div><input type="radio" id="q4_refresh" name="entry.165377675" value="提神醒腦" required><label for="q4_refresh">提神醒腦</label></div>
                    <div><input type="radio" id="q4_taste" name="entry.165377675" value="享受風味"><label for="q4_taste">享受風味</label></div>
                    <div><input type="radio" id="q4_habit" name="entry.165377675" value="習慣 / 日常儀式感"><label for="q4_habit">習慣 / 日常儀式感</label></div>
                    <div><input type="radio" id="q4_social" name="entry.165377675" value="社交需求"><label for="q4_social">社交需求</label></div>
                    <div><input type="radio" id="q4_other_reason" name="entry.165377675" value="其他"><label for="q4_other_reason">其他</label></div>
                </div>

                <div class="question-group" id="q5_group">
                    <label for="q5_age">5. 您的年齡層：</label>
                    <select id="q5_age" name="entry.1699797010">
                        <option value="">請選擇...</option>
                        <option value="24歲以下">24歲以下</option>
                        <option value="25-34歲">25-34歲</option>
                        <option value="35-44歲">35-44歲</option>
                        <option value="45歲以上">45歲以上</option>
                        <option value="不願透露">不願透露</option>
                    </select>
                </div>
            </div>
            <button type="submit" id="submitButton">提交問卷</button>
        </form>

        <div id="confirmationMessage" style="display: none;">
            <p>問卷到此結束，感謝您的填寫！</p>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const form = document.getElementById('coffeeSurveyForm');
            const q1HabitRadios = document.querySelectorAll('input[name="q1_habit"]');
            const furtherQuestionsDiv = document.getElementById('furtherQuestions');
            const confirmationMessageDiv = document.getElementById('confirmationMessage');
            const submitButton = document.getElementById('submitButton');

            // Q1: 控制後續問題的顯示
            q1HabitRadios.forEach(radio => {
                radio.addEventListener('change', function() {
                    if (this.value === '是') {
                        furtherQuestionsDiv.style.display = 'block';
                        setFurtherQuestionsRequired(true);
                    } else if (this.value === '否') {
                        furtherQuestionsDiv.style.display = 'none';
                        setFurtherQuestionsRequired(false);
                    }
                });
            });

            function setFurtherQuestionsRequired(isRequired) {
                const q2 = document.getElementById('q2_frequency');
                const q3Radios = document.querySelectorAll('input[name="q3_type"]');
                const q4Radios = document.querySelectorAll('input[name="q4_reason"]');
                // Q5 年齡層為選填，不在此處處理 required

                if (q2) q2.required = isRequired;

                if (q3Radios.length > 0) {
                    q3Radios.forEach(r => r.required = isRequired);
                    if (isRequired && q3Radios[0]) q3Radios[0].required = true; else if (!isRequired && q3Radios[0]) q3Radios[0].required = false;
                }
                if (q4Radios.length > 0) {
                    q4Radios.forEach(r => r.required = isRequired);
                    if (isRequired && q4Radios[0]) q4Radios[0].required = true; else if (!isRequired && q4Radios[0]) q4Radios[0].required = false;
                }
            }

            function showConfirmationAndHideForm() {
                form.style.display = 'none'; // 隱藏整個表單
                const description = document.querySelector('.description');
                if(description) description.style.display = 'none'; // 也隱藏描述
                const h1 = document.querySelector('h1');
                if(h1) h1.style.display = 'none'; // 也隱藏標題

                confirmationMessageDiv.style.display = 'block';
            }

            form.addEventListener('submit', function(event) {
                event.preventDefault(); // 阻止表單的默認提交行為

                const q1Selected = document.querySelector('input[name="q1_habit"]:checked');

                if (!q1Selected) {
                    alert('請回答問題 1。');
                    return;
                }

                if (q1Selected.value === '否') {
                    console.log("使用者選擇不喝咖啡。");
                    const formData = { q1_habit: '否' };
                    console.log('收集到的表單數據:', formData);
                    showConfirmationAndHideForm();
                    return;
                }

                // 如果選 "是"，則檢查後續必填問題
                let allValid = true;
                const q2Value = document.getElementById('q2_frequency').value;
                if (!q2Value) {
                    alert('請回答問題 2。');
                    allValid = false;
                }
                const q3Selected = document.querySelector('input[name="q3_type"]:checked');
                if (!q3Selected) {
                    alert('請回答問題 3。');
                    allValid = false;
                }
                const q4Selected = document.querySelector('input[name="q4_reason"]:checked');
                if (!q4Selected) {
                    alert('請回答問題 4。');
                    allValid = false;
                }

                if (!allValid) {
                    return;
                }

                const formData = {
                    q1_habit: q1Selected.value,
                    q2_frequency: q2Value,
                    q3_type: q3Selected ? q3Selected.value : null,
                    q4_reason: q4Selected ? q4Selected.value : null,
                    q5_age: document.getElementById('q5_age').value
                };

                console.log('收集到的表單數據:', formData);
                showConfirmationAndHideForm();
            });
        });
    </script>
</body>
</html>